

# üéµ Spondex

**–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –º–µ–∂–¥—É Spotify –∏ –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–æ–π**



[–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞) ‚Ä¢ [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç) ‚Ä¢ [–ö–æ–º–∞–Ω–¥—ã](#-–∫–æ–º–∞–Ω–¥—ã) ‚Ä¢ [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#%EF%B8%8F-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞) ‚Ä¢ [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞) ‚Ä¢ [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

---

> ‚ö° **–í–∞–∂–Ω–æ:** –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω —Å –Ω—É–ª—è. –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∞—Ä—Ö–∏–≤–µ: [alesha-pro/spondex-archive](https://github.com/alesha-pro/spondex-archive)



Spondex —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –∫–∞–∫ daemon –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ª–∞–π–∫–∏ –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏. –ù–æ–≤—ã–µ —Ç—Ä–µ–∫–∏ —Å –ª—é–±–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –Ω–∞ –¥—Ä—É–≥—É—é ‚Äî —Å —É—á—ë—Ç–æ–º –Ω–µ—á—ë—Ç–∫–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è, —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

> üí° –õ–∞–π–∫–Ω—É–ª —Ç—Ä–µ–∫ –≤ Spotify ‚Äî –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –≤ –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–µ. –ò –Ω–∞–æ–±–æ—Ä–æ—Ç.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python** 3.12+
- **[uv](https://docs.astral.sh/uv/)** ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π
- **macOS / Linux** ‚Äî –Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **Windows** ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ WSL *(–Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ)*

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ uv

```bash
# macOS / Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# –∏–ª–∏ —á–µ—Ä–µ–∑ Homebrew
brew install uv
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ì–ª–æ–±–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚Äî –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
uv tool install spondex

# –ò–ª–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
git clone https://github.com/alesha-pro/spondex.git && cd spondex
uv sync
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
spondex start       # –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ ‚Üí –º–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
spondex status      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
spondex sync        # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
spondex logs -f     # –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
spondex dashboard   # –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–¥–∞—à–±–æ—Ä–¥
spondex stop        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–º–æ–Ω
```

## üìã –ö–æ–º–∞–Ω–¥—ã


| –ö–æ–º–∞–Ω–¥–∞                          | –û–ø–∏—Å–∞–Ω–∏–µ                                                |
| -------------------------------- | ------------------------------------------------------- |
| `spondex start`                  | –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ–Ω (–ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ ‚Äî –º–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) |
| `spondex stop`                   | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–º–æ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ                              |
| `spondex restart`                | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ–Ω                                     |
| `spondex status`                 | –°–æ—Å—Ç–æ—è–Ω–∏–µ, –∞–ø—Ç–∞–π–º, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, —Å—á—ë—Ç—á–∏–∫–∏ —Ç—Ä–µ–∫–æ–≤         |
| `spondex sync [--mode full]`     | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ü–∏–∫–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏                            |
| `spondex logs [-n 50] [-f]`      | –í—ã–≤–æ–¥ –ª–æ–≥–æ–≤ –¥–µ–º–æ–Ω–∞                                      |
| `spondex logs --sync`            | JSON-–ª–æ–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏                                  |
| `spondex dashboard`              | –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–¥–∞—à–±–æ—Ä–¥ –≤ –±—Ä–∞—É–∑–µ—Ä–µ                          |
| `spondex config show`            | –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–µ–∫—Ä–µ—Ç—ã —Å–∫—Ä—ã—Ç—ã)                   |
| `spondex config set <key> <val>` | –ó–∞–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä. `sync.mode full`)                |
| `spondex db status`              | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏          |


–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/CLI.md](docs/CLI.md)

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –ú–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç –∏—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ.

üü° –¢–æ–∫–µ–Ω –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∏

OAuth-—Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä (DevTools) –∏–ª–∏ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

- [–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ Yandex Music](https://yandex-music.readthedocs.io/en/main/token.html)

```bash
spondex config set yandex.token <–≤–∞—à_—Ç–æ–∫–µ–Ω>
```



üü¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Spotify

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Spotify Developer Dashboard](https://developer.spotify.com/dashboard/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Create app)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client ID** –∏ **Client Secret**
4. –í **Redirect URIs** –¥–æ–±–∞–≤—å—Ç–µ: `http://127.0.0.1:8888/callback`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
spondex config set spotify.client_id <client_id>
spondex config set spotify.client_secret <client_secret>
spondex config set spotify.redirect_uri "http://127.0.0.1:8888/callback"
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ wizard –æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç `refresh_token` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.



### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–•—Ä–∞–Ω–∏—Ç—Å—è –≤ `~/.spondex/config.toml`, —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º `spondex start`.

```bash
spondex config show                          # –ø—Ä–æ—Å–º–æ—Ç—Ä
spondex config set sync.interval_minutes 15  # –∏–∑–º–µ–Ω–µ–Ω–∏–µ
```


| –°–µ–∫—Ü–∏—è      | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                                                            |
| ----------- | -------------------------------------------------------------------- |
| **daemon**  | `dashboard_port`, `log_level`                                        |
| **sync**    | `interval_minutes`, `mode` (full/incremental), `propagate_deletions` |
| **spotify** | `client_id`, `client_secret`, `redirect_uri`, `refresh_token`        |
| **yandex**  | `token`                                                              |


## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ              Daemon Process              ‚îÇ
                    ‚îÇ                                         ‚îÇ
CLI (typer) ‚îÄ‚îÄUDS‚îÄ‚îÄ‚ñ∫‚îÇ  FastAPI RPC    ‚îÄ‚îÄ‚ñ∫ SyncEngine          ‚îÇ
                    ‚îÇ  /rpc               ‚îú SpotifyClient     ‚îÇ
                    ‚îÇ                     ‚îú YandexClient       ‚îÇ
                    ‚îÇ                     ‚îî Database (SQLite)  ‚îÇ
                    ‚îÇ                                         ‚îÇ
                    ‚îÇ  Dashboard (React SPA)                   ‚îÇ
                    ‚îÇ  :9847  ‚îÄ‚îÄ‚ñ∫ WebSocket (real-time)        ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```


| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç       | –†–æ–ª—å                                                            |
| --------------- | --------------------------------------------------------------- |
| **CLI**         | –¢–æ–Ω–∫–∏–π –∫–ª–∏–µ–Ω—Ç ‚Äî JSON-–∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ Unix Domain Socket           |
| **Daemon**      | Double-fork daemonization, PID-—Ñ–∞–π–ª, signal handling, structlog |
| **RPC Server**  | FastAPI –Ω–∞ UDS, `POST /rpc {"cmd": "...", "params": {}}`        |
| **Sync Engine** | –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å 3-—É—Ä–æ–≤–Ω–µ–≤—ã–º fuzzy matching      |
| **Dashboard**   | React SPA, WebSocket-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –≥—Ä–∞—Ñ–∏–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞–º–∏    |


### üéØ –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–æ–≤

```
Tier 1 ‚Üí –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (lowercase, strip feat/remix, —É–±—Ä–∞—Ç—å –∞–∫—Ü–µ–Ω—Ç—ã)
Tier 2 ‚Üí –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞ ‚Üî –ª–∞—Ç–∏–Ω–∏—Ü–∞)
Tier 3 ‚Üí Fuzzy matching (Levenshtein) + –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (¬±5 —Å–µ–∫)
```

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
uv sync --extra dev                    # dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
uv run pytest tests/ -v                # —Ç–µ—Å—Ç—ã
uv run pytest tests/ --cov=spondex     # –ø–æ–∫—Ä—ã—Ç–∏–µ
uv run ruff check src/ tests/          # –ª–∏–Ω—Ç–∏–Ω–≥
uv run ruff format src/ tests/         # —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
uv run mypy src/                       # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
```

### –°–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–∞

```bash
bash scripts/build.sh    # —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Üí wheel
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ö–æ–Ω—Ñ–∏–≥ `~/.spondex/config.toml` —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –ø—Ä–∞–≤–∞–º–∏ `600`
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ —Å–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø—Ä–∞–≤–∞—Ö
- –î–µ–º–æ–Ω –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç `umask(0o077)` ‚Äî –≤—Å–µ runtime-—Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É
- API-—Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ `SecretStr` –∏ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ª–æ–≥–∏ –∏ –≤—ã–≤–æ–¥ CLI

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[MIT](LICENSE)